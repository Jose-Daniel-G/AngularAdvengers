import{c as F}from"./chunk-XWMW445C.js";import{a as S}from"./chunk-WBOWFEW2.js";import{a as O,b as d,c as U,d as j,f as q,h as N,i as R,k as B,m as D}from"./chunk-AG3B6QWI.js";import{Ab as C,Ga as m,Ia as s,L as h,Ma as n,Na as r,O as E,Oa as g,Qa as w,Ra as f,T as x,W as y,Xa as a,Ya as _,cb as I,j as c,n as v,wa as l,xa as p,y as b,yb as L}from"./chunk-LLCAKDY2.js";var u=class t{constructor(e){this.http=e}currentUserLoginOn=new c(!1);currentUserData=new c({id:0,email:""});login(e){return this.http.get("json/data.json").pipe(h(i=>{this.currentUserData.next(i),this.currentUserLoginOn.next(!0)}),b(this.handleError))}handleError(e){return console.error("Error capturado en handleError:",e),e.status===0?console.log("Se ha producido un error: ",e.error):console.log("El backend retorno el codigo de estado: ",e.status,e.error),v(()=>new Error("Algo fallo. por favor intente nuevamente"))}get userData(){return this.currentUserData.asObservable()}get userLoginOn(){return this.currentUserLoginOn.asObservable()}static \u0275fac=function(i){return new(i||t)(x(S))};static \u0275prov=E({token:t,factory:t.\u0275fac,providedIn:"root"})};function P(t,e){t&1&&(n(0,"div"),a(1," El Email es requerido. "),r())}function A(t,e){t&1&&(n(0,"div"),a(1," El Email debe tener un formato v\xE1lido. "),r())}function G(t,e){if(t&1&&(n(0,"div",9),m(1,P,2,0,"div",10)(2,A,2,0,"div",10),r()),t&2){let i=f();l(),s("ngIf",i.email.errors==null?null:i.email.errors.required),l(),s("ngIf",i.email.errors==null?null:i.email.errors.email)}}function M(t,e){t&1&&(n(0,"div"),a(1," El Password es requerido. "),r())}function V(t,e){if(t&1&&(n(0,"div",9),m(1,M,2,0,"div",10),r()),t&2){let i=f();l(),s("ngIf",i.password.errors==null?null:i.password.errors.required)}}var k=class t{constructor(e,i,o){this.formBuilder=e;this.router=i;this.LoginService=o;this.loginForm=this.formBuilder.group({email:["jose@gmail.com",[d.required,d.email]],password:["12345678",[d.required,d.minLength(8)]]})}loginError="";loginForm;ngOnInit(){}get email(){return this.loginForm.controls.email}get password(){return this.loginForm.controls.password}login(){this.loginForm.valid?this.LoginService.login(this.loginForm.value).subscribe({next:e=>{console.log(e)},error:e=>{console.error(e),this.loginError=e.message},complete:()=>{console.info("Login completed"),this.router.navigateByUrl("/inicio"),this.loginForm.reset()}}):(this.loginForm.markAllAsTouched(),alert("Error al ingresar los datos."))}static \u0275fac=function(i){return new(i||t)(p(B),p(F),p(u))};static \u0275cmp=y({type:t,selectors:[["app-login"]],standalone:!0,features:[I],decls:15,vars:4,consts:[[1,"max-w-md","mx-auto","p-6","bg-white","shadow-md","rounded",3,"formGroup"],[1,"text-red-600","mb-4"],[1,"mb-4"],["for","exampleInputEmail1",1,"block","text-gray-700","font-semibold","mb-2"],["formControlName","email","type","email","id","exampleInputEmail1","aria-describedby","emailHelp",1,"w-full","px-3","py-2","border","border-gray-300","rounded","focus:outline-none","focus:ring","focus:ring-indigo-100"],["class","text-red-600 mt-2 text-sm",4,"ngIf"],["for","exampleInputPassword1",1,"block","text-gray-700","font-semibold","mb-2"],["formControlName","password","type","password","id","exampleInputPassword1",1,"w-full","px-3","py-2","border","border-gray-300","rounded","focus:outline-none","focus:ring","focus:ring-indigo-100"],["type","submit",1,"w-full","bg-indigo-600","text-white","py-2","rounded","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-indigo-600","focus:ring-opacity-50",3,"click"],[1,"text-red-600","mt-2","text-sm"],[4,"ngIf"]],template:function(i,o){i&1&&(n(0,"form",0)(1,"p",1),a(2),r(),n(3,"div",2)(4,"label",3),a(5,"Email"),r(),g(6,"input",4),m(7,G,3,2,"div",5),r(),n(8,"div",2)(9,"label",6),a(10,"Password"),r(),g(11,"input",7),m(12,V,2,1,"div",5),r(),n(13,"button",8),w("click",function(){return o.login()}),a(14," Iniciar Sesi\xF3n "),r()()),i&2&&(s("formGroup",o.loginForm),l(2),_(o.loginError),l(5),s("ngIf",o.email.invalid&&(o.email.dirty||o.email.touched)),l(5),s("ngIf",o.password.invalid&&(o.password.dirty||o.password.touched)))},dependencies:[D,q,O,U,j,N,R,C,L]})};export{k as LoginComponent};
